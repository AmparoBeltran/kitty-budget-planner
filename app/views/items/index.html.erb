<main class="container">
  <div class="header">
    <h1>Items</h1>
    <%= link_to "New item",
                new_item_path,
                class: "btn btn--primary" %>
  </div>

  <%= render @items %>
  <h1 class="header">Summary</h1>
  <table class="summary">
  <thead>
    <tr>
      <th>Name</th>
      <th>Price</th>
      <th>Frequency (per month)</th>
      <th>Daily Cost</th>
      <th>Weekly Cost</th>
      <th>Monthly Cost</th>
      <th>Yearly Cost</th>
    </tr>
  </thead>
  <tbody>
    <% @items.each do |item| %>
      <tr>
        <td><%= item.name %></td>
        <td><%= number_to_currency(item.price, unit: '£') %></td>
        <td><%= pluralize(item.frequency, 'time') %></td>
        <td><%= number_to_currency(calculate_cost(item, :daily), unit: '£') %></td>
        <td><%= number_to_currency(calculate_cost(item, :weekly), unit: '£') %></td>
        <td><%= number_to_currency(calculate_cost(item, :monthly), unit: '£') %></td>
        <td><%= number_to_currency(calculate_cost(item, :yearly), unit: '£') %></td>
      </tr>
    <% end %>
    <tr class="total">
      <th colspan="3" scope="row">Total</th>
      <td><%= number_to_currency(@items.sum { |item| calculate_cost(item, :daily) }, unit: '£') %></td>
      <td><%= number_to_currency(@items.sum { |item| calculate_cost(item, :weekly) }, unit: '£') %></td>
      <td><%= number_to_currency(@items.sum { |item| calculate_cost(item, :monthly) }, unit: '£') %></td>
      <td><%= number_to_currency(@items.sum { |item| calculate_cost(item, :yearly) }, unit: '£') %></td>
      <td colspan="3"></td>
    </tr>
  </tbody>
</table>
  
</main>